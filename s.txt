import React, { useState, useEffect } from 'react';
import UniversalHeader from '../components/UniversalHeader';
import UniversalFooter from '../components/UniversalFooter';
import Sidebar from '../components/Sidebar';
import GetStarted from './GetStarted';
import { HiMenuAlt3 } from 'react-icons/hi';

const LandingPage: React.FC = () => {
  const [sidebarOpen, setSidebarOpen] = useState(false);
  const [showBackToTop, setShowBackToTop] = useState(false);
  const [isGetStartedOpen, setIsGetStartedOpen] = useState(false);

  const scrollToTop = () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  useEffect(() => {
    const handleScroll = () => {
      setShowBackToTop(window.scrollY > 300);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  return (
    <div className="flex flex-col min-h-screen">
      <div
        role="navigation"
        aria-label="Sidebar navigation"
        className={`fixed top-0 left-0 h-full transition-transform duration-120 ease-in-out ${sidebarOpen ? 'w-56' : 'w-16'} border-r-2 border-gray-700`}
        style={{ zIndex: 100 }}
      >
        <Sidebar open={sidebarOpen} />
        <div className="fixed top-2 left-2 flex items-center">
          <button
            onClick={() => setSidebarOpen(prev => !prev)}
            className="cursor-pointer"
            aria-label={sidebarOpen ? 'Close Sidebar' : 'Open Sidebar'}
            aria-expanded={sidebarOpen}
            aria-controls="sidebar"
          >
            <HiMenuAlt3 fill="white" size={46} />
          </button>
        </div>
      </div>
      <div className={`flex-1 flex flex-col transition-transform duration-500 ease-in-out ${sidebarOpen ? 'ml-56' : 'ml-16'} bg-gray-900`}>
        <UniversalHeader />
        <main className="flex-1 flex flex-col overflow-auto px-4 py-3">
          {/* Hero Section */}
          <section className="mb-8">
            <div className="bg-gradient-to-r from-blue-800 to-blue-600 text-white p-6 rounded-lg shadow-md relative overflow-hidden">
              <h1 className="text-4xl font-bold mb-4">Welcome to Debate.me</h1>
              <p className="text-lg">
                Discover and engage in meaningful debates. Share your thoughts, watch insightful discussions, and connect with others.
              </p>
              <div className="mt-4">
                <button
                  onClick={() => setIsGetStartedOpen(true)}
                  className="bg-primary-dark hover:bg-gray-800 text-white font-semibold py-2 px-4 rounded-lg shadow-md relative"
                >
                  <span className="absolute inset-0 bg-gradient-to-r from-blue-800 to-blue-600 opacity-20 rounded-lg"></span>
                  Get Started
                </button>
              </div>
            </div>
          </section>

          {/* Additional content can go here */}

        </main>
        <UniversalFooter />
        {showBackToTop && (
          <button
            onClick={scrollToTop}
            className="fixed bottom-4 right-4 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
            aria-label="Back to top"
          >
            â†‘
          </button>
        )}
      </div>
      <GetStarted isOpen={isGetStartedOpen} onClose={() => setIsGetStartedOpen(false)} />
    </div>
  );
};

export default LandingPage;
